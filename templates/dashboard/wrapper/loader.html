      .loader {
            display: none;
            position: fixed;
            z-index: 9999;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
 <div class="loader"></div>
<script>
      document.addEventListener('htmx:afterOnLoad', function(evt) {
  const contentDiv = evt.detail.target;
  console.log('target: ', contentDiv)
  const newTitle = contentDiv.querySelector('[data-title]')?.getAttribute('data-title');
  if (newTitle){
    document.getElementById('page-title').innerText = newTitle;

  }
});


document.addEventListener('htmx:configRequest', function(evt) {
  document.querySelector('.loader').style.display = 'block';
});

document.addEventListener('htmx:afterOnLoad', function(evt) {
  document.querySelector('.loader').style.display = 'none';
});

document.addEventListener('htmx:afterSwap', function(evt) {
  document.querySelector('.loader').style.display = 'none';
});
</script>
