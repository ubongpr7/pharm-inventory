{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.16.0/font/bootstrap-icons.css" rel="stylesheet">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

	<link rel="stylesheet" href="{% static 'assets/css/auth.css' %}">
	<title>{{title}}</title>
	

	
</head>
<body>
 <div class="modal fade" id="messageModal" tabindex="-1" role="dialog" aria-labelledby="messageModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="messageModalLabel">Message</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>{{ message }}</p>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript to trigger modal display -->
    <script>
        // Check if a message is available
        {% if messages %}
            $(document).ready(function() {
                $('#messageModal').modal('show');
            });
        {% endif %}
    </script>
  
  
	
	<div class="container">

		<form id="registrationForm" action="{% url 'register' %}" class="register active" method="POST" >
		  		  {% csrf_token %}
		  
		  
	
			<h3 class="title">Registeration</h3>
			
	    <div class="form-group">
				<label for="first_name"></label>
				<div class="input-group">
					<input type="text"   name="first_name" placeholder="First name">
					 <i class="bi bi-person"></i> 
				</div>
				 
        <label for="last_name"></label>
				<div class="input-group">
					<input type="text"  name="last_name" placeholder="Last name">
           <i class="bi bi-person"></i> 
					
				</div>
				 
				 
				  
				
				
			
			
			
			
				<label for="email"></label>
				<div class="input-group">
					<input type="email"  id="email1" name="email1" placeholder="Email address">
					<i class='bx bx-envelope'></i>
				</div>
       
				
        <label for="email2"></label>
				<div class="input-group">
					<input type="email" id="email2" name="email2" placeholder="Email address">
					<i class='bx bx-envelope'></i>
				</div>
     
			
			
  
			
				
     <div class="form-group">
			
			
				<label for="password"></label>
				<div class="input-group">
					<input type="password" pattern=".{8,}" id="password1" name="password1" placeholder="Your password">
					<i class='bx bx-lock-alt' ></i>
				</div>
				<span class="help-text">At least 8 characters with symbols and numbers</span>
			
			
				<label for="confirm-pass"></label>
				<div class="input-group">
					<input type="password" id="confirm_password" name="confirm_password" placeholder="Enter password again">
					<i class='bx bx-lock-alt' ></i>
				</div>
				<span class="help-text">Confirm password must be same with password</span>
			
			<button type="submit" class="btn-submit">Register</button>
			<p>I already have an account. <a href="{% url 'signin' %}"</p>
			</div>
		</form>
	</div>
    

    
<script>
    document.getElementById('registrationForm').addEventListener('submit', function(event) {
        event.preventDefault();
        validateForm();
    });

    function validateForm() {
        const username = document.getElementById('email1').value;
        const email = document.getElementById('email2').value;
        const password = document.getElementById('password1').value;
        const confirm_password = document.getElementById('confirm_password').value;

        if (password.includes(username) || password.includes(email)) {
            alert('Password cannot be similar to email.');
            return;
        }
        if(password!=confirm_password){
            alert('Passwords do not match')
            return;
        }

        const passwordRegex = /^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{8,}$/;
        if (!password.match(passwordRegex)) {
            alert('Password must be at least 8 characters with symbols and numbers.');
            return;
        }

        document.getElementById('registrationForm').submit();
    }
</script>

	
</body>
</html>